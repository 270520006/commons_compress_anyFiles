# shell的各种参数

## 文件测试运算符

文件测试运算符用于检测 Unix 文件的各种属性。

属性检测描述如下：

| 操作符  | 说明                                                         | 举例                      |
| :------ | :----------------------------------------------------------- | :------------------------ |
| -b file | 检测文件是否是块设备文件，如果是，则返回 true。              | [ -b $file ] 返回 false。 |
| -c file | 检测文件是否是字符设备文件，如果是，则返回 true。            | [ -c $file ] 返回 false。 |
| -d file | 检测文件是否是目录，如果是，则返回 true。                    | [ -d $file ] 返回 false。 |
| -f file | 检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。 | [ -f $file ] 返回 true。  |
| -g file | 检测文件是否设置了 SGID 位，如果是，则返回 true。            | [ -g $file ] 返回 false。 |
| -k file | 检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。  | [ -k $file ] 返回 false。 |
| -p file | 检测文件是否是有名管道，如果是，则返回 true。                | [ -p $file ] 返回 false。 |
| -u file | 检测文件是否设置了 SUID 位，如果是，则返回 true。            | [ -u $file ] 返回 false。 |
| -r file | 检测文件是否可读，如果是，则返回 true。                      | [ -r $file ] 返回 true。  |
| -w file | 检测文件是否可写，如果是，则返回 true。                      | [ -w $file ] 返回 true。  |
| -x file | 检测文件是否可执行，如果是，则返回 true。                    | [ -x $file ] 返回 true。  |
| -s file | 检测文件是否为空（文件大小是否大于0），不为空返回 true。     | [ -s $file ] 返回 true。  |
| -e file | 检测文件（包括目录）是否存在，如果是，则返回 true。          | [ -e $file ] 返回 true。  |

其他检查符：

- **-S**: 判断某文件是否 socket。
- **-L**: 检测文件是否存在并且是一个符号链接。

## 文件测试

| 参数      | 说明                                 |
| :-------- | :----------------------------------- |
| -e 文件名 | 如果文件存在则为真                   |
| -r 文件名 | 如果文件存在且可读则为真             |
| -w 文件名 | 如果文件存在且可写则为真             |
| -x 文件名 | 如果文件存在且可执行则为真           |
| -s 文件名 | 如果文件存在且至少有一个字符则为真   |
| -d 文件名 | 如果文件存在且为目录则为真           |
| -f 文件名 | 如果文件存在且为普通文件则为真       |
| -c 文件名 | 如果文件存在且为字符型特殊文件则为真 |
| -b 文件名 | 如果文件存在且为块特殊文件则为真     |

另外，Shell 还提供了与( -a )、或( -o )、非( ! )三个逻辑操作符用于将测试条件连接起来，其优先级为： **!** 最高， **-a** 次之， **-o** 最低。例如： 

|：command 1 | command 2，他的功能是把第一个命令command 1执行的结果作为command2的输入传给command 2。

||：与&&的作用正好相反，是在执行到成功的指令时停止后续指令的执行。command0 || command1，如果command0执行成功，则command1不再执行。如果command0执行失败，则继续执行command1

&&：如果前面的一个命令回传的是0，也就是正确，那么就执行后面的指令，如果前面的指令回传非0（错误的），那么就不去执行后面的指令。

||：正好与&&相反，如果前面的指令执行结果返回错误值，那么就可以执行后面的指令。

## Shell中简单使用的字符截取

```shell
str=abcdefjhigklmnopqrstuvwmnoxyz
echo ${str%mno*}        # 截取从字符串右边数第一个mno字符串前面所有字符。
echo ${str%%mno*}       # 截取从字符串右边数最后一个mno字符串前面所有字符 
echo ${str#*mno}        # 截取从左向右数第一个mno字符串后所有字符
echo ${str##*mno}       # 截取从左向右数最后一个mno字符串后的所有字符
echo ${str:5}           # 截掉变量str左边数五个字符，保留第六个字符后面所有字符
echo ${str:5:1}         # 截掉变量str左边数五个字符，保留一个字符，即截取第六个字符
echo ${#str}            # 计算变量str字符数
echo ${str/n/czh}       # 替换变量str左数第一个字符n为字符串czh
echo ${str//n/czh}     # 替换变量str所有字符n为字符串czh
```


## tr命令简单介绍
```shell
tr -c [set1] [set2]                       # set1集合中没有的字符使用set2替代
ps -ef|grep pmon|tr -c "[0-9][a-z]" "#"   # 将输出中所有非字母数字都替代为#

tr -c -d [set1]        # 删除输入中不包含在set1中的字符
转换大小写等，详见命令man tr
示例：
ps -ef|grep pmon|tr -cd '0-9'            #删除过滤出来的不是数字的
或
ps -ef|grep pmon|tr -cd "[0-9]"/"[a-z]"  # 取输入set中字母加数字
ps -ef|grep pmon|tr [:lower:] [:upper:]  # 小写转换为大写

 
```

sed命令的语法
1.sed的语法命令格式
sed [选项] sed编辑命令 输入文件
shell 命令 | sed [选项] sed编辑命令
sed [选项] -f sed脚本文件 输入文件

2.sed的常用选项
-n：只显示匹配处理的行（否则会输出所有）（取消默认输出）
-e：执行多个编辑命令时（一般用；代替）
-i：直接在文件中进行修改，而不是输出到屏幕
-r：支持扩展正则表达式
-f：从脚本文件中读取内容并执行（文件中的编辑命令每行一个,不用；隔开

3.sed的常用编辑命令
p：打印匹配行 print
d：删除指定行 delete
a：在匹配行后面追加 append
i：在匹配行前面插入 insert
c：整行替换
r：将文件的内容读入 read
w：将文本写入文件 write
s：字符串替换（匹配正则表达式）substitution
 
